<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <springProperty name="APP_NAME" source="spring.application.name"/>
    <springProperty name="ENV" source="logging.environment"/>

    <include resource="org/springframework/boot/logging/logback/base.xml"/>
    <appender name="LOGSTASH" class="ch.qos.logback.core.rolling.RollingFileAppender">

        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <customFields>
                {
                "service":"${APP_NAME}",
                "environment":"${ENV}"
                }
            </customFields>
        </encoder>

        <file>./logs/spring-boot-logs.log</file> <!-- add your log file path -->.
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>./logs/spring-boot-logs-%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>1</maxHistory><!-- log file will override after one day-->
        </rollingPolicy>
        <encoder class="net.logstash.logback.encoder.LogstashEncoder"/>
    </appender>
    <root level="INFO">
        <appender-ref ref="LOGSTASH"/>
    </root>
</configuration>